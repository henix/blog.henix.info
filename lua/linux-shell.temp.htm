#{include: 'doctype.seg.htm' }
<head>
#{include: 'head-common.seg.htm' }
<link href="/css/posts.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" href="/syntaxhighlighter/styles/shCore.css" type="text/css" />

<script type="text/javascript">
var sytheme;
if (when == 'morning') {
	sytheme = 'Default';
} else if (when == 'evening') {
	sytheme = 'Django';
} else if (when == 'night') {
	sytheme = 'Midnight';
}
document.write('<link rel="stylesheet" href="/syntaxhighlighter/styles/shTheme' + sytheme + '.css" type="text/css" />');
</script>
<noscript><link rel="stylesheet" href="/syntaxhighlighter/styles/shThemeDefault.css" type="text/css" /></noscript>

<title>Linux 一行 shell 集锦 - 遥远的街市</title>
</head>

<body>
<div id="page">

#{include: 'header.seg.htm' }
#{include: 'nav.seg.htm' }
<div id="content">

<div class="blogpost">
	<div class="title"><a href="/linux-shell.html">Linux 一行 shell 集锦</a></div>
	<div class="postcontent">
#{
function mymarkdown(str)
	local writer = lunamark.writer.html.new()
	function writer.verbatim(s)
		return {'<pre class="brush: bash">', s, '</pre>'}
	end
	local parse = lunamark.reader.markdown.new(writer, {definition_lists = true})
	local result, metadata = parse(str)
	return result
end
 }
#{= mymarkdown[=[
### 文件 / 目录

一个目录下有多少文件

	find -type f | wc -l

tree-like list a dir

	find . -type d | sed -e 's/[^\/]*\//--/g' -e 's/-/|/'

remove last line of a file(fast)

	truncate -s -$(tail -n1 FILENAME | wc -c) FILENAME

### 系统工具

better mount

	mount | column -t

seconds since epoch

	date +%s

### 字符串

tolower

	tr '[A-Z]' '[a-z]'

### Random number

	echo $[RANDOM%10+1]

random string for password

	strings /dev/urandom | grep -o '[[:alnum:]]' | head -n 30 | tr -d '\n'; echo

### pretty print json (Perl required)

	curl http://path/to/json | json_pp
]=] }
	</div>
</div>
<div id="disqus_thread"></div>
</div><!-- end of content -->
#{include: 'footer.seg.htm' }
</div><!-- end of page -->

#{include: 'syntax.seg.htm' }
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = '#{= disqus_shortname }'; // required: replace example with your forum shortname

	// The following are highly recommended additional parameters. Remove the slashes in front to use.
	var disqus_identifier = '-linux-shell';
	var disqus_url = '#{= siteurl }/linux-shell.html';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

#{include: 'ga.seg.htm' }
</body>
</html>
