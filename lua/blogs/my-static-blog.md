% 纯静态博客的实现
% Web; Blog; Web; 前端; 架构
% 1294297139

　　最近一直在断断续续地做这个博客，当时决定自己做一个博客的时候，突发奇想想到了用纯静态的方式。当时主要是觉得用 python 的话必须用 Google 特定的数据库操作方式，不能用普通的 SQL 之类，写出来的程序不具备通用性，所以还不如干脆纯静态。

### 优势

　　显然纯静态博客有以下这些优势：

1. 速度快。访问页面不用查询数据库，自然是快得没话说。
2. 最大限度的控制。相较于用 wordpress 搭建博客，自己的是想怎么写就怎么写，也不必挖空心思地去寻找能满足自己需要的插件。（变成要找 jquery 插件了……）
3. 搬迁容易。如果 GAE 被墙，我可以立即换个主页空间。现在要找一个免费的静态空间很容易，但找一个 python 或 java 的动态空间实在是难上加难。

### 问题

　　当然也有一些问题，下面我谈谈我的实现方法：

1\. 如何实现评论？

　　我的评论直接用的免费的 [DISQUS.COM](http://disqus.com/)。允许匿名评论，允许 OpenID 登录。

2\. 如何统计访问量？

　　统计访问量我用了 [Google Analytics](http://www.google.com/analytics/)，功能很强大。Google Analytics 还可以把访问量数据导出成 csv，这样我就可以在博客上显示文章的访问量了，不过不是实时更新的。

3\. 如何统计评论数量？

　　DISQUS.COM 可以将评论导出成 XML，然后再写段程序统计即可。

4\. 如何实现搜索？

　　我使用的是 [Google 自定义搜索](http://www.google.com/cse/)。

### 缺点

　　当然纯静态博客也有一些缺点：

1. 评论系统必须依赖于外部服务。其实如果我一旦搬迁，我的所有评论将无法显示。因为 DISQUS.COM 是会验证地址的。也就是说地址一变，它就认为是不同的网站，只能重新申请一个服务，以前网站上的评论无法跟着搬迁。
2. 编程较繁琐。什么东西都要自己写，既要应付 IE6 的 position fixed bug，还要用 jquery 响应键盘事件，然后还要搞清楚 RSS、robot.txt、sitemap.xml 是什么东东。当然如果你自己能 enjoy 这种对细节的完全控制的话，也就没问题。

### 优化

　　纯静态博客的架构也很简单，根本不需要后端优化。我还是做了一些前端优化：

　　首先的自然是牛逼哄哄的 [YSlow 35条](http://developer.yahoo.com/performance/rules.html)。看看 [DBA Notes 的评论](http://www.dbanotes.net/web/web_performance_optimization.html)你就知道前端优化是很重要的而又往往被忽视。

　　这些准则中有些还是很容易做到的，比如：

1. Put Stylesheets at the Top：把样式表放到最上面。
2. Put Scripts at the Bottom：把脚本放到最下面。

　　所以你可以看看我的页面，这两条还是做到了的。

　　还有传说中的 CSS Sprites，雪碧技术。不过我这个网站本来就小，图片就那么几张，还雪碧呢。咱就懒得做了，图片就让它原模原样的吧。

### 未来

　　我这个博客还有很多功能没开发，未来准备实现这些功能：

1. ~~显示文章的访问量、评论数量。~~
2. ~~根据访问量、评论数评出一篇文章的“热度”（popularity），然后在右边栏添加一个“最热门文章”，还要加一个“随机文章”。当然这个要等有一定文章数量之后再说。~~
3. ~~每篇文章的下面列出“相关文章”，这个要根据一定的相关度算法，向读者推荐最相关的内容。比如如果两篇文章有一个 tag 一样，相关度就 +2 等等。~~
4. 分页。目前还没做分页，等文章数量多了之后再说。
